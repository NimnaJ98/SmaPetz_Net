{% extends 'base.html' %}

{% block title %}
Display Orders
{% endblock title %}

{% block content %}

<div class="grid">
    {% if orders %}
        {% for order in orders %}
            <div class="{% if order.fully_paid %} bgcolor1 {% else %} bgcolor2 {% endif %} card m-2 mt-3">
                <div class="col m-2">
                    <h3 class="orderDetail">#{{order.id}} - {{order.first_name}} {{order.last_name}}</h3> 
                </div>
                <div class="col m-4">
                    <b>Name:</b> {{ order.first_name }} {{ order.last_name }} <br>
                    <b>Address:</b> {{ order.address1 }} , {{ order.address2 }} <br>
                    <b>Zip and Country:</b> {{ order.zipcode }} {{ order.country }} <br>
                    <b>E-mail:</b> {{ order.email }}<br>
                    <b>Phone:</b> {{ order.phone }}
                </div>    
                <table class="ordersTable m-2">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Paid</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in order.items.all %}
                            {% comment %} {% if item.store == request.user.store %} {% endcomment %}
                                <tr>
                                    <td>{{ item.product.title }}</td>
                                    <td>${{ item.product.price }}</td>
                                    <td>{{ item.quantity }}</td>
                                    <td>{{ item.store_paid|yesno:"Yes,No" }}</td>
                                    <td>${{ item.get_total_price }}</td>
                                </tr>
                            {% comment %} {% endif %} {% endcomment %}
                        {% endfor %}
                    </tbody>
                </table>
                
            </div>  
        {% endfor %}
    {% else %}
        <p>You don't have any order yet...</p>
    {% endif %}
</div>
{% endblock content %}